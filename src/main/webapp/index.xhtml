<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	template="/templates/default.xhtml">

	<f:metadata>
		<f:event type="preRenderView" listener="#{userDataModel.load()}" />
		<f:event type="preRenderView"
			listener="#{productCategoryDataModel.load()}" />
	</f:metadata>

	<ui:define name="content">

		<h1>SoftwareStore</h1>

		<h:form id="userListForm">
			<h2>Users</h2>

			<div>
				<h:outputText value="no users"
					rendered="#{empty userDataModel.list}" />
			</div>

			<h:dataTable id="userTable" value="#{userDataModel.list}" var="user"
				rendered="#{not empty userDataModel.list}"
				styleClass="simpletablestyle">

				<h:column>
					<f:facet name="header">Name</f:facet>
					<h:outputText value="#{user.name}" />
				</h:column>

				<h:column>
					<f:facet name="header">E-mail</f:facet>
					<h:outputText value="#{user.email}" />
				</h:column>

				<h:column>
					<f:facet name="header">Real Name</f:facet>
					<h:outputText value="#{user.realName}" />
				</h:column>

				<h:column>
					<f:facet name="header">Administrator (role)</f:facet>
					<h:outputText value="#{user.role}" />
				</h:column>

				<h:column>
					<f:facet name="header">Registration</f:facet>
					<h:outputText value="#{user.registrationDate}">
						<f:convertDateTime type="both" />
					</h:outputText>
				</h:column>

			</h:dataTable>
		</h:form>

		<h:form id="categoryListForm">
			<h2>Categories</h2>

			<div>
				<h:outputText value="no categories"
					rendered="#{empty productCategoryDataModel.list}" />
			</div>

			<h:dataTable id="categoryTable"
				value="#{productCategoryDataModel.list}" var="category"
				rendered="#{not empty productCategoryDataModel.list}"
				styleClass="simpletablestyle">

				<h:column>
					<f:facet name="header">Name</f:facet>
					<h:outputText value="#{category.name}" />
				</h:column>

				<h:column>
					<f:facet name="header">Description</f:facet>
					<h:outputText value="#{category.description}" />
				</h:column>

			</h:dataTable>
		</h:form>

	</ui:define>
</ui:composition>